#include <stdio.h>
#include <string.h>
#include <unistd.h>


int monitor_running = 0;
int monitor_pid;

int main()
{
  while(1)
    {
      char command[30];
      printf("monitor_hub>");
      scanf("%s", command);
      command[strcspn(command, "\n")] = 0;
      
      if(strcmp(command, "start_monitor") == 0)
	{
	  if(monitor_running)
	    {
	      printf("Monitor already running.\n");
	    }
	  else
	    {
	      monitor_pid = fork();

	      //Error fork
	      if ((pid = fork()) < 0)
		{
		  perror("Unable to open process");
		  exit(-1);
		}

	      //in monitor
	      if (pid == 0)
		{
		  printf("monitor\n");
		  //sleep(3);
		}
	      else
		{
		  monitor_running = 1;
		  printf("[Hub] Monitor started with PID %d\n", monitor_pid);
		}     
	    }
     
	}
    }
  
  return 0;
}

